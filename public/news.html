<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tin tá»©c tÃ i chÃ­nh</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <nav class="nav">
    <div class="nav-content">
      <div class="logo">ğŸ“° Tin tá»©c</div>
      <div class="nav-links">
        <a href="index.html">Trang chá»§</a>
        <a href="news.html" class="active">Tin tá»©c</a>
        <a href="auth.html" id="loginLink">ÄÄƒng nháº­p</a>   
        <button id="logoutBtn" class="btn btn-secondary" style="display:none">ÄÄƒng xuáº¥t</button>
      </div>
    </div>
  </nav>

  <div class="container">
    <h2 style="margin: 1rem 0;">Tin tá»©c má»›i nháº¥t tá»« VnExpress Kinh Doanh</h2>
    <section class="news-feed" id="rssContainer">
      <p>Äang táº£i tin tá»©c...</p>
    </section>
  </div>

  <script>
    
    document.addEventListener('DOMContentLoaded', () => {
  
  const loginLink = document.getElementById('loginLink');
  const logoutBtn = document.getElementById('logoutBtn');
  const fullName = localStorage.getItem('fullName');

  if (fullName) {
    // ÄÃ£ Ä‘Äƒng nháº­p â†’ hiá»‡n tÃªn vÃ  nÃºt ÄÄƒng xuáº¥t
    loginLink.textContent = fullName;
    loginLink.removeAttribute('href');          // náº¿u khÃ´ng cáº§n click vÃ o
    logoutBtn.style.display = 'inline-block';
  } else {
    // ChÆ°a Ä‘Äƒng nháº­p â†’ hiá»‡n link ÄÄƒng nháº­p
    loginLink.textContent = 'ÄÄƒng nháº­p';
    loginLink.href = 'auth.html';
    logoutBtn.style.display = 'none';
  }

  // Báº¯t sá»± kiá»‡n ÄÄƒng xuáº¥t
  logoutBtn.addEventListener('click', () => {
    localStorage.removeItem('userId');
    localStorage.removeItem('fullName');
    window.location.reload();
  });
});

    fetch('/api/news/rss')
      .then(res => res.json())
      .then(data => {
        const container = document.getElementById('rssContainer');
        container.innerHTML = '';

        data.forEach(item => {
          const article = document.createElement('article');
          article.className = 'news-item';
          article.innerHTML = `
            <h3><a href="${item.link}" target="_blank">${item.title}</a></h3>
            <p>${item.contentSnippet || ''}</p>
            <hr />
          `;
          container.appendChild(article);
        });
      })
      .catch(err => {
        document.getElementById('rssContainer').innerHTML = '<p>KhÃ´ng thá»ƒ táº£i tin tá»©c.</p>';
        console.error(err);
      });
  </script>
</body>
</html>